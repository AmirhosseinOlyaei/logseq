- #CtD
	- #Node
		- controller
			- toyListingController.js
				- ```
				  exports.getAllToyListings = async (req, res) => {
				    const { deliveryMethod, zipCode } = req.query; // Extract query parameters
				  
				    try {
				      // Build a query object based on the provided parameters
				      const query = {};
				      if (deliveryMethod && deliveryMethod !== "All") {
				        query.deliveryMethod = deliveryMethod;
				      }
				      if (zipCode) {
				        query.zip_code = zipCode; // Use the zip_code field from the schema
				      }
				  
				      const listings = await ToyListing.find(query)
				        .populate({
				          path: "listed_by_id",
				          select: "email first_name last_name profile_picture",
				        })
				        .populate({
				          path: "modified_by_id",
				          select: "email first_name last_name profile_picture",
				        })
				        .populate({
				          path: "given_to_user_id",
				          select: "email first_name last_name profile_picture",
				        })
				        .exec();
				      res.status(200).json(listings);
				    } catch (error) {
				      res.status(500).json({ message: error.message });
				    }
				  };
				  ```